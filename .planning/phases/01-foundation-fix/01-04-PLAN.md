---
phase: 01-foundation-fix
plan: 04
type: execute
wave: 3
depends_on: ["03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "R CMD check completes with 0 errors"
    - "R CMD check completes with 0 warnings (or only unavoidable notes)"
    - "All 150 tests pass"
  artifacts: []
  key_links: []
---

<objective>
Final verification that Phase 1 requirements are met.

Purpose: Confirm all Foundation Fix work is complete and R CMD check passes cleanly.
Output: Verification that TEST-01, TEST-03, QUAL-01, QUAL-02, QUAL-03, QUAL-04 are all satisfied.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan summaries (verify fixes applied)
@.planning/phases/01-foundation-fix/01-01-SUMMARY.md
@.planning/phases/01-foundation-fix/01-02-SUMMARY.md
@.planning/phases/01-foundation-fix/01-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run comprehensive R CMD check</name>
  <files></files>
  <action>
Run a full R CMD check to verify all issues are resolved:

```bash
cd /Users/bbuchsbaum/code/muscal
R CMD build .
R CMD check muscal_*.tar.gz --as-cran
```

Or using devtools:
```r
devtools::check()
```

Capture the full output. Check for:
1. 0 errors
2. 0 warnings (goal)
3. Minimal notes (some notes are unavoidable)

If any errors or warnings remain:
- Document the issue
- Determine if it's a regression from this phase or pre-existing
- Create a follow-up task if needed
  </action>
  <verify>
R CMD check output shows: "0 errors | 0 warnings | N notes" (where N is minimal/acceptable).
  </verify>
  <done>
R CMD check passes with 0 errors and 0 warnings. Any remaining notes are documented and acceptable.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Phase 1 Foundation Fix - all deprecated calls fixed, S3 signatures corrected, examples wrapped, tests passing</what-built>
  <how-to-verify>
1. Review the R CMD check output from Task 1
2. Confirm 0 errors and 0 warnings
3. Run `devtools::test()` and confirm all 150 tests pass
4. Optionally run an example manually: `example(mfa)` (requires genpca installed)

If any issues found, describe them and we'll create additional fixes.
  </how-to-verify>
  <resume-signal>Type "approved" if R CMD check is clean, or describe any remaining issues</resume-signal>
</task>

</tasks>

<verification>
Phase 1 complete when:
1. R CMD check: 0 errors, 0 warnings
2. devtools::test(): 150/150 passing
3. Human verified and approved
</verification>

<success_criteria>
TEST-01: All existing tests pass - VERIFIED
TEST-03: R CMD check passes with no errors - VERIFIED
QUAL-01: Fix deprecated chkor() calls - VERIFIED (Plan 01)
QUAL-02: Fix S3 method signature mismatches - VERIFIED (Plan 02)
QUAL-03: Fix or wrap failing examples - VERIFIED (Plan 03)
QUAL-04: Remove/fix unused imports - VERIFIED (Plan 01)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-fix/01-04-SUMMARY.md`

This summary should include:
- Final R CMD check results
- Test count (should be 150/150)
- Any remaining notes/warnings that are acceptable
- Confirmation that all 6 Phase 1 requirements are met
</output>
