% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/components_utils.R
\name{estimate_components}
\alias{estimate_components}
\alias{loading_reliability}
\title{Estimate the number of components and loading reliability (shared helpers)}
\usage{
estimate_components(
  fit,
  method = c("rmt", "variance"),
  sdev = NULL,
  V_list = NULL,
  n = NULL,
  tail_q = 0.2,
  alpha = 0.05
)

loading_reliability(
  fit,
  method = c("bootstrap"),
  boot_loadings = NULL,
  alpha = 0.05,
  V_ref = NULL
)
}
\arguments{
\item{fit}{A fitted object (e.g., \code{bada}, \code{mfa},
\code{penalized_mfa}, \code{penalized_mfa_clusterwise}).}

\item{method}{Component or reliability method. For \code{estimate_components},
one of \code{"rmt"} (Marchenkoâ€“Pastur edge) or \code{"variance"}
(keep all non-zero). For \code{loading_reliability}, currently
\code{"bootstrap"}.}

\item{sdev}{Optional singular values; if \code{NULL}, taken from
\code{fit$sdev} when available.}

\item{V_list}{Optional list of loading matrices; if \code{NULL}, the helper
attempts to extract from \code{fit} (using \code{attr(fit, "V_list")} or
splitting \code{fit$v} by \code{block_indices} when present).}

\item{n}{Optional number of observations (rows); defaults to \code{nrow}
of scores if available.}

\item{tail_q}{Numeric; fraction of smallest eigenvalues used to estimate
noise variance for the RMT test (default 0.2). Only used in
\code{estimate_components} when \code{method = "rmt"}.}

\item{alpha}{Confidence level for hypothesis tests or bootstrap intervals.}

\item{boot_loadings}{For \code{loading_reliability}: a list of loading
matrices from bootstrap refits (all same dimensions as the reference
loadings).}

\item{V_ref}{For \code{loading_reliability}: optional reference loading
matrix. If \code{NULL}, extracted from \code{fit} using the same logic
as \code{V_list}.}
}
\value{
\item{estimate_components}{A list with \code{keep}, \code{criterion},
  and \code{method_used}.}
  \item{loading_reliability}{A list with matrices \code{mean}, \code{sd},
  \code{lower}, \code{upper}, and \code{sign_consistency}.}
}
\description{
These helpers provide a common interface for component retention and loading
reliability across \code{bada}, \code{mfa}, \code{penalized_mfa}, and related
models. They are intentionally modular so alternative criteria (e.g., AIC,
permutations) can be added later without changing call sites.
}
